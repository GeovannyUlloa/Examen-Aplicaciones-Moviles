<app-header [showMenu]="true" title="Detalles del Viaje"></app-header>

<ion-content *ngIf="viaje">
  <ion-card>
    <ion-card-header>
      <ion-card-title>Viaje a {{ viaje.destino }}</ion-card-title>
      <ion-card-subtitle>Detalles del viaje</ion-card-subtitle>
    </ion-card-header>

    <ion-card-content>
      <ion-list>
        <ion-item>
          <ion-icon name="person-outline" slot="start"></ion-icon>
          <ion-label>
            <h2>Conductor</h2>
            <p>{{ viaje.conductor }}</p>
          </ion-label>
        </ion-item>

        <ion-item>
          <ion-icon name="calendar-outline" slot="start"></ion-icon>
          <ion-label>
            <h2>Fecha</h2>
            <p>{{ viaje.fecha | date:'dd/MM/yyyy' }}</p>
          </ion-label>
        </ion-item>

        <ion-item>
          <ion-icon name="time-outline" slot="start"></ion-icon>
          <ion-label>
            <h2>Hora</h2>
            <p>{{ viaje.hora }}</p>
          </ion-label>
        </ion-item>

        <ion-item>
          <ion-icon name="pin-outline" slot="start"></ion-icon>
          <ion-label>
            <h2>Punto de Encuentro</h2>
            <p>{{ viaje.puntoEncuentro }}</p>
          </ion-label>
        </ion-item>

        <ion-item>
          <ion-icon name="people-outline" slot="start"></ion-icon>
          <ion-label>
            <h2>Capacidad</h2>
            <p>{{ viaje.pasajerosActuales }}/{{ viaje.pasajerosMaximos }} pasajeros</p>
          </ion-label>
        </ion-item>

        <ion-item>
          <ion-icon name="cash-outline" slot="start"></ion-icon>
          <ion-label>
            <h2>Pago por Pasajero</h2>
            <p>{{ viaje.pagoPorPasajero ?? 0 | currency:'CLP ' }}</p>
          </ion-label>
        </ion-item>

      </ion-list>
    </ion-card-content>
  </ion-card>

  <ion-card>
    <ion-card-header>
      <ion-card-title>
        <ion-icon name="people"></ion-icon>
        Pasajeros Inscritos
      </ion-card-title>
    </ion-card-header>

    <ion-card-content>
      <ion-list *ngIf="viaje.pasajeros?.length > 0; else noPasajeros">
        <ion-item *ngFor="let pasajero of viaje.pasajeros">
          <ion-avatar slot="start">
            <ion-icon name="person-circle-outline" size="large"></ion-icon>
          </ion-avatar>
          <ion-label>
            <h2>{{ pasajero.name }}</h2>
            <p>{{ pasajero.email }}</p>
          </ion-label>
        </ion-item>
      </ion-list>

      <ng-template #noPasajeros>
        <div class="ion-text-center ion-padding">
          <ion-text color="medium">
            <p>No hay pasajeros inscritos en este viaje</p>
          </ion-text>
        </div>
      </ng-template>
    </ion-card-content>
  </ion-card>

  <div class="ion-padding">
    <ion-button expand="block" color="medium" (click)="volver()">
      <ion-icon name="arrow-back-outline" slot="start"></ion-icon>
      Volver
    </ion-button>
  </div>
</ion-content>